version: '3.7'
services:
  nethermind:
    init: true
    container_name: poa-core-rpc
    image: nethermind/nethermind:latest
    environment:
      NETHERMIND_INITCONFIG_ISMINING: "true"
      NETHERMIND_CONFIG: poacore
      NETHERMIND_KEYSTORECONFIG_TESTNODEKEY: $KEY
      NETHERMIND_SYNCCONFIG_FASTSYNC: "true"
      NETHERMIND_SYNCCONFIG_FASTBLOCKS: "true"
      NETHERMIND_JSONRPCCONFIG_ENABLED: "true"
      NETHERMIND_JSONRPCCONFIG_HOST: 0.0.0.0
      NETHERMIND_SYNCCONFIG_DOWNLOADBODIESINFASTSYNC: "true"
      NETHERMIND_SYNCCONFIG_DOWNLOADRECEIPTSINFASTSYNC: "true"
      NETHERMIND_PRUNINGCONFIG_MODE: "None"
      NETHERMIND_INITCONFIG_CHAINSPECPATH: "/spec.json"
      NETHERMIND_NETWORKCONFIG_STATICPEERS: "enode://6643b59581992d929b640acd0ac7375bc725bdc0dce1071998c4187f536d9ac73d258416494f7db56bb2603245c920ba7bb4ff714bf4e8d661a92fa68cf8a23b@52.53.185.188:30303,enode://7388baa5a9085d194050bfa8b72160203011d692a7a5236cd505759423e949d4e48b466989ee2d4f6f18c28113112768837c74644aaf81c4a841899ceb4aba2a@54.219.162.134:30303,enode://51b318294888d8d3aa7ae86d0cb3711d389586172abad3e44f55871cad6aa48a79c75b5231595b115526ea72c189b58bff792bcabd8af4a34542436809a94f80@54.193.96.252:30303,enode://d6821737662eccf1617c190a37f38d520cf8d22ccea05c8fb1b121a08e3a2f92b11e37960bc6132d6c928460425f9d115580d4e643ede8847f597d3d2b639855@54.193.169.207:30303,enode://e5a1e46fa3a594f78b26e58cd58ab16d8877688e3316e269e79409c22e8560cfaaedd00983322158af55a295767476cdcaeb7c5353e5cf6adddb23af398e3a16@52.53.185.188:30303"
    volumes:
      - ./data/logs:/nethermind/logs
      - ./data/keystore:/nethermind/keystore
      - ./data/nethermind_db:/nethermind/nethermind_db
      - ./spec.json:/spec.json
    ports:
      - "30303:30303"
      - "30303:30303/udp"
      - "30313:30313"
      - "30313:30313/udp"
      - "8545:8545"
    restart: unless-stopped
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "10"
